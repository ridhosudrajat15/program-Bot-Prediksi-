<!DOCTYPE html>
<html lang="id">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>Bot Prediksi Sepakbola</title>
Â  <script src="https://cdn.tailwindcss.com"></script>
Â  <style>
Â  Â  html, body {
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  Â  width: 100%;
Â  Â  Â  height: 100%;
Â  Â  Â  overflow: hidden;
Â  Â  }
Â  Â  #chatArea {
Â  Â  Â  scroll-behavior: smooth;
Â  Â  }
Â  </style>
</head>
<body class="bg-gray-900 text-white">

Â  <!-- âœ… SIDEBAR -->
Â  <div id="sidebar" class="fixed top-0 left-0 h-full w-64 bg-gray-800 text-white p-4 transform -translate-x-full transition-transform duration-300 z-50">
Â  Â  <div class="flex justify-between items-center mb-6">
Â  Â  Â  <h2 class="text-xl font-bold">Menu</h2>
Â  Â  Â  <button onclick="toggleSidebar()">âœ–</button>
Â  Â  </div>
Â  Â  <ul class="space-y-4">
Â  Â  Â  <li><a href="#" class="block hover:text-green-400">ğŸ“Š Statistik Tim</a></li>
Â  Â  Â  <li><a href="#" class="block hover:text-green-400">ğŸ“… Jadwal Bola</a></li>
Â  Â  Â  <li><a href="#" class="block hover:text-green-400">ğŸ§  Tentang Bot</a></li>
Â  Â  Â  <li><a href="#" class="block hover:text-green-400">âš™ï¸ Pengaturan</a></li>
Â  Â  Â  <li><a href="#" class="block hover:text-green-400">â“ Bantuan</a></li>
Â  Â  Â  <li><a href="#" onclick="hapusChat()" class="block hover:text-red-400">ğŸšª Hapus Chat</a></li>
Â  Â  </ul>
Â  </div>

Â  <!-- âœ… OVERLAY -->
Â  <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden" onclick="toggleSidebar()"></div>

Â  <!-- âœ… HEADER -->
Â  <header class="bg-gray-800 fixed top-0 left-0 w-full z-30 flex justify-between items-center px-4 py-3">
Â  Â  <button class="text-white text-2xl" onclick="toggleSidebar()">â˜°</button>
Â  Â  <h1 class="text-lg font-bold">Bot Prediksi Sepakbola</h1>
Â  Â  <button class="text-white text-2xl">ğŸ‡®ğŸ‡©</button>
Â  </header>

Â  <!-- âœ… MAIN -->
Â  <main id="chatArea" class="pt-16 pb-24 px-4 space-y-4 overflow-y-auto max-w-4xl mx-auto h-[calc(100vh-8rem)]">
Â  Â  <!-- chat muncul di sini -->
Â  </main>

Â  <!-- âœ… FOOTER -->
Â  <footer class="bg-gray-800 fixed bottom-0 left-0 w-full z-30 p-3 flex items-center space-x-2 max-w-4xl mx-auto">
Â  Â  <div class="relative">
Â  Â  Â  <button onclick="toggleUploadMenu()" class="text-2xl">â•</button>
Â  Â  Â  <div id="uploadMenu" class="absolute bottom-12 left-0 bg-gray-700 text-sm rounded-lg hidden shadow-md z-50">
Â  Â  Â  Â  <label class="block px-4 py-2 hover:bg-gray-600 cursor-pointer">
Â  Â  Â  Â  Â  Ambil Foto
Â  Â  Â  Â  Â  <input type="file" accept="image/*" capture="environment" onchange="handleImage(this.files[0])" class="hidden">
Â  Â  Â  Â  </label>
Â  Â  Â  Â  <label class="block px-4 py-2 hover:bg-gray-600 cursor-pointer">
Â  Â  Â  Â  Â  Pilih dari Galeri
Â  Â  Â  Â  Â  <input type="file" accept="image/*" onchange="handleImage(this.files[0])" class="hidden">
Â  Â  Â  Â  </label>
Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <input id="userInput" type="text" placeholder="Tulis pertanyaan di sini..." class="flex-1 bg-gray-700 text-white px-4 py-2 rounded-full outline-none" onkeydown="if(event.key==='Enter') kirimPesan()" />
Â  Â  <button class="text-2xl" onclick="kirimPesan()">âœ”ï¸</button>
Â  </footer>

Â  <!-- âœ… SCRIPT -->
Â  <script>
Â  Â  let namaUser = "";

Â  Â  function toggleSidebar() {
Â  Â  Â  document.getElementById('sidebar').classList.toggle('-translate-x-full');
Â  Â  Â  document.getElementById('overlay').classList.toggle('hidden');
Â  Â  }

Â  Â  function toggleUploadMenu() {
Â  Â  Â  const menu = document.getElementById("uploadMenu");
Â  Â  Â  menu.classList.toggle("hidden");
Â  Â  Â  document.addEventListener("click", closeMenuOutside, { once: true });
Â  Â  }

Â  Â  function closeMenuOutside(e) {
Â  Â  Â  const menu = document.getElementById("uploadMenu");
Â  Â  Â  if (!menu.contains(e.target)) menu.classList.add("hidden");
Â  Â  }

Â  Â  function handleImage(file) {
Â  Â  Â  if (file) {
Â  Â  Â  Â  const reader = new FileReader();
Â  Â  Â  Â  reader.onload = function (e) {
Â  Â  Â  Â  Â  const imgDiv = document.createElement("div");
Â  Â  Â  Â  Â  imgDiv.className = "w-fit max-w-[80%]";
Â  Â  Â  Â  Â  imgDiv.innerHTML = `<img src="${e.target.result}" class="rounded-xl max-w-xs mb-2" alt="gambar kiriman">`;
Â  Â  Â  Â  Â  document.getElementById('chatArea').appendChild(imgDiv);

Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  tampilkanBalasan("Gambar diterima! Akan saya analisis dalam konteks sepak bola âš½ğŸ“·");
Â  Â  Â  Â  Â  }, 700);

Â  Â  Â  Â  Â  scrollToBottom();
Â  Â  Â  Â  };
Â  Â  Â  Â  reader.readAsDataURL(file);
Â  Â  Â  }
Â  Â  }

Â  Â  function scrollToBottom() {
Â  Â  Â  const chatArea = document.getElementById('chatArea');
Â  Â  Â  chatArea.scrollTop = chatArea.scrollHeight;
Â  Â  }

Â  Â  function tampilkanBalasan(teks) {
Â  Â  Â  const botBubble = document.createElement('div');
Â  Â  Â  botBubble.className = 'bg-green-600 p-3 rounded-lg w-fit max-w-[80%] ml-auto';
Â  Â  Â  botBubble.textContent = teks;
Â  Â  Â  document.getElementById('chatArea').appendChild(botBubble);
Â  Â  Â  scrollToBottom();
Â  Â  }

Â  Â  async function kirimPesan() {
Â  Â  Â  const input = document.getElementById('userInput');
Â  Â  Â  const pesan = input.value.trim();
Â  Â  Â  if (pesan === '') return;

Â  Â  Â  const userBubble = document.createElement('div');
Â  Â  Â  userBubble.className = 'bg-gray-800 p-3 rounded-lg w-fit max-w-[80%] mb-2';
Â  Â  Â  userBubble.textContent = pesan;
Â  Â  Â  document.getElementById('chatArea').appendChild(userBubble);

Â  Â  Â  const teks = pesan.toLowerCase();
Â  Â  Â  let balasan = "";

Â  Â  Â  if (teks.includes("nama saya") || teks.includes("saya") || teks.includes("aku")) {
Â  Â  Â  Â  const namaMatch = teks.match(/(nama saya|saya|aku)\s+([a-zA-Z]+)/);
Â  Â  Â  Â  if (namaMatch && namaMatch[2]) {
Â  Â  Â  Â  Â  namaUser = namaMatch[2].charAt(0).toUpperCase() + namaMatch[2].slice(1);
Â  Â  Â  Â  Â  balasan = `Hai ${namaUser}! Nama kamu keren âš½. Silakan tanya tentang sepak bola!`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  balasan = "Boleh tahu siapa nama kamu, bro?";
Â  Â  Â  Â  }
Â  Â  Â  } else if (["halo", "hai", "assalamualaikum", "pagi", "malam", "sore"].some(k => teks.includes(k))) {
Â  Â  Â  Â  balasan = namaUser ? `Halo ${namaUser}! Siap bahas bola? âš½` : "Halo! Selamat datang di BotPrediksi âš½. Silakan tanya tentang bola ya!";
Â  Â  Â  } else if (["siapa kamu", "nama kamu", "kamu siapa"].some(k => teks.includes(k))) {
Â  Â  Â  Â  balasan = "Saya BotPrediksi âš½, siap bantu kamu soal bola 24 jam!";
Â  Â  Â  } else if (["terima kasih", "makasih"].some(k => teks.includes(k))) {
Â  Â  Â  Â  balasan = namaUser ? `Sama-sama ${namaUser}! Jangan lupa tanya prediksi lagi ya âš½` : "Sama-sama bro! Kapan pun mau tanya bola, saya siap âš½";
Â  Â  Â  } else if (["apa kabar", "gimana kabar", "sehat"].some(k => teks.includes(k))) {
Â  Â  Â  Â  balasan = namaUser ? `Saya baik ${namaUser}, kamu gimana? Siap nonton bola? âš½` : "Saya baik-baik saja bro! Siap bantu prediksi bola kapan pun!";
Â  Â  Â  } else if (["bantuan", "help", "gimana caranya", "cara pakai"].some(k => teks.includes(k))) {
Â  Â  Â  Â  balasan = "Tulis aja pertanyaanmu tentang bola, misalnya 'Prediksi Madrid vs Barca' âš½";
Â  Â  Â  } else if (["goblok", "bego", "tolol", "anjing"].some(k => teks.includes(k))) {
Â  Â  Â  Â  balasan = "Waduh bro, jangan emosi ğŸ˜… kita seru-seruan aja bahas bola âš½";
Â  Â  Â } else if (teks.includes("liga")) {
Â  getJadwalLigaHariIni(teks).then(res => tampilkanBalasan(res));
Â  input.value = '';
Â  return;
Â  Â  Â  Â Â 
Â  Â  Â  } else if (teks.includes("prediksi") && teks.includes("vs")) {
Â  Â  Â  Â  getPrediksiScoreDanOverUnder(teks).then(res => tampilkanBalasan(res));
Â  Â  Â  Â  input.value = '';
Â  Â  Â  Â  return;
Â  Â  Â  } else {
Â  Â  Â  Â  balasan = namaUser ? `Maaf ${namaUser}, saya hanya bisa jawab soal sepak bola âš½` : "Maaf, saya hanya bisa jawab soal sepak bola âš½";
Â  Â  Â  }

Â  Â  Â  tampilkanBalasan(balasan);
Â  Â  Â  input.value = '';
Â  Â  }

Â  Â  function hapusChat() {
Â  Â  Â  document.getElementById('chatArea').innerHTML = '';
Â  Â  }

Â  Â  async function getPrediksiScoreDanOverUnder(pertanyaan) {
Â  Â  Â  try {
Â  Â  Â  Â  const matchRegex = /prediksi(?: skor)?\s+([a-zA-Z\s]+)\s+vs\s+([a-zA-Z\s]+)(?:\s+pada\s+tanggal\s+(\d{1,2})\s+([a-zA-Z]+)\s+(\d{4}))?/i;
Â  Â  Â  Â  const match = pertanyaan.match(matchRegex);
Â  Â  Â  Â  if (!match) return "Format pertanyaan belum dipahami bro. Contoh: Prediksi skor Persib vs Arema tanggal 10 Juli 2025";

Â  Â  Â  Â  const team1 = match[1].trim();
Â  Â  Â  Â  const team2 = match[2].trim();
Â  Â  Â  Â  let tanggal = "";
Â  Â  Â  Â  if (match[3] && match[4] && match[5]) {
Â  Â  Â  Â  Â  const day = match[3].padStart(2, '0');
Â  Â  Â  Â  Â  const month = getMonthNumber(match[4]);
Â  Â  Â  Â  Â  tanggal = `${match[5]}-${month}-${day}`;
Â  Â  Â  Â  }

Â  Â  Â  Â  const apiKey = "ce13b7fee5bfbaa4476de793b906f0d2";
Â  Â  Â  Â  const res = await fetch(`https://api-football-v1.p.rapidapi.com/v3/fixtures/headtohead?h2h=${team1}-${team2}`, {
Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  'X-RapidAPI-Key': apiKey,
Â  Â  Â  Â  Â  Â  'X-RapidAPI-Host': 'api-football-v1.p.rapidapi.com'
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  const matches = data.response;

Â  Â  Â  Â  if (!matches || matches.length === 0) return "Tidak ditemukan data head-to-head untuk tim tersebut.";

Â  Â  Â  Â  let totalGol = 0;
Â  Â  Â  Â  let over = 0, under = 0;
Â  Â  Â  Â  matches.forEach(m => {
Â  Â  Â  Â  Â  const g1 = m.goals.home ?? 0;
Â  Â  Â  Â  Â  const g2 = m.goals.away ?? 0;
Â  Â  Â  Â  Â  const total = g1 + g2;
Â  Â  Â  Â  Â  totalGol += total;
Â  Â  Â  Â  Â  total > 2.5 ? over++ : under++;
Â  Â  Â  Â  });

Â  Â  Â  Â  const rataGol = (totalGol / matches.length).toFixed(2);
Â  Â  Â  Â  return `ğŸ“Š Prediksi ${team1} vs ${team2}:
- Rata-rata gol: ${rataGol}
- Over 2.5: ${over}x
- Under 2.5: ${under}x
ğŸ¯ Perkiraan: ${rataGol > 2.5 ? "Over 2.5 âš½" : "Under 2.5 âš½"}`;
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  return "Gagal ambil data dari API bro. Coba lagi nanti.";
Â  Â  Â  }
Â  Â  }

Â  Â  function getMonthNumber(bulan) {
Â  Â  Â  const map = {
Â  Â  Â  Â  januari: "01", februari: "02", maret: "03", april: "04", mei: "05",
Â  Â  Â  Â  juni: "06", juli: "07", agustus: "08", september: "09",
Â  Â  Â  Â  oktober: "10", november: "11", desember: "12"
Â  Â  Â  };
Â  Â  Â  return map[bulan.toLowerCase()] || "01";
Â  Â  }
Â  Â  async function getJadwalLigaHariIni(teks) {
Â  try {
Â  Â  const apiKey = "ce13b7fee5bfbaa4476de793b906f0d2";
Â  Â  const ligaMapping = {
Â  Â  Â  "liga inggris": 39,
Â  Â  Â  "premier league": 39,
Â  Â  Â  "liga spanyol": 140,
Â  Â  Â  "la liga": 140,
Â  Â  Â  "liga italia": 135,
Â  Â  Â  "serie a": 135,
Â  Â  Â  "liga jerman": 78,
Â  Â  Â  "bundesliga": 78,
Â  Â  Â  "liga prancis": 61,
Â  Â  Â  "ligue 1": 61
Â  Â  };

Â  Â  const ditemukan = Object.keys(ligaMapping).find(nama => teks.includes(nama));
Â  Â  if (!ditemukan) return "Nama liga tidak dikenali bro. Contoh: Liga Inggris, La Liga, Serie A";

Â  Â  const idLiga = ligaMapping[ditemukan];
Â  Â  const tanggalHariIni = new Date().toISOString().split("T")[0];

Â  Â  const res = await fetch(`https://api-football-v1.p.rapidapi.com/v3/fixtures?date=${tanggalHariIni}&league=${idLiga}&season=2024`, {
Â  Â  Â  headers: {
Â  Â  Â  Â  'X-RapidAPI-Key': apiKey,
Â  Â  Â  Â  'X-RapidAPI-Host': 'api-football-v1.p.rapidapi.com'
Â  Â  Â  }
Â  Â  });

Â  Â  const data = await res.json();
Â  Â  const match = data.response;

Â  Â  if (!match || match.length === 0) return `Tidak ada pertandingan ${ditemukan} hari ini bro.`;

Â  Â  const jadwal = match.map(m => {
Â  Â  Â  const home = m.teams.home.name;
Â  Â  Â  const away = m.teams.away.name;
Â  Â  Â  const jam = new Date(m.fixture.date).toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });
Â  Â  Â  return `- ${home} vs ${away} (${jam} WIB)`;
Â  Â  }).join("\n");

Â  Â  return `ğŸ“… Jadwal ${ditemukan.toUpperCase()} hari ini:\n${jadwal}`;
Â  } catch (err) {
Â  Â  return "Ups! Gagal ambil jadwal liga. Coba lagi nanti bro.";
Â  }
Â  Â  }
Â  Â Â 
Â  </script>
</body>
</html> gimana bro udh oke belom? haha

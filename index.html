<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bot Prediksi Sepakbola</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    #chatArea {
      scroll-behavior: smooth;
    }
  </style>
</head>
<body class="bg-gray-900 text-white">

  <!-- ✅ SIDEBAR -->
  <div id="sidebar" class="fixed top-0 left-0 h-full w-64 bg-gray-800 text-white p-4 transform -translate-x-full transition-transform duration-300 z-50">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-bold">Menu</h2>
      <button onclick="toggleSidebar()">✖</button>
    </div>
    <ul class="space-y-4">
      <li><a href="#" class="block hover:text-green-400">📊 Statistik Tim</a></li>
      <li><a href="#" class="block hover:text-green-400">📅 Jadwal Bola</a></li>
      <li><a href="#" class="block hover:text-green-400">🧠 Tentang Bot</a></li>
      <li><a href="#" class="block hover:text-green-400">⚙️ Pengaturan</a></li>
      <li><a href="#" class="block hover:text-green-400">❓ Bantuan</a></li>
      <li><a href="#" onclick="hapusChat()" class="block hover:text-red-400">🚪 Hapus Chat</a></li>
    </ul>
  </div>

  <!-- ✅ OVERLAY -->
  <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden" onclick="toggleSidebar()"></div>

  <!-- ✅ HEADER -->
  <header class="bg-gray-800 fixed top-0 left-0 w-full z-30 flex justify-between items-center px-4 py-3">
    <button class="text-white text-2xl" onclick="toggleSidebar()">☰</button>
    <h1 class="text-lg font-bold">Bot Prediksi Sepakbola</h1>
    <button class="text-white text-2xl">🇮🇩</button>
  </header>

  <!-- ✅ MAIN -->
  <main id="chatArea" class="pt-16 pb-24 px-4 space-y-4 overflow-y-auto max-w-4xl mx-auto h-[calc(100vh-8rem)]">
    <!-- chat muncul di sini -->
  </main>

  <!-- ✅ FOOTER -->
  <footer class="bg-gray-800 fixed bottom-0 left-0 w-full z-30 p-3 flex items-center space-x-2 max-w-4xl mx-auto">
    <div class="relative">
      <button onclick="toggleUploadMenu()" class="text-2xl">➕</button>
      <div id="uploadMenu" class="absolute bottom-12 left-0 bg-gray-700 text-sm rounded-lg hidden shadow-md z-50">
        <label class="block px-4 py-2 hover:bg-gray-600 cursor-pointer">
          Ambil Foto
          <input type="file" accept="image/*" capture="environment" onchange="handleImage(this.files[0])" class="hidden">
        </label>
        <label class="block px-4 py-2 hover:bg-gray-600 cursor-pointer">
          Pilih dari Galeri
          <input type="file" accept="image/*" onchange="handleImage(this.files[0])" class="hidden">
        </label>
      </div>
    </div>
    <input id="userInput" type="text" placeholder="Tulis pertanyaan di sini..." class="flex-1 bg-gray-700 text-white px-4 py-2 rounded-full outline-none" onkeydown="if(event.key==='Enter') kirimPesan()" />
    <button class="text-2xl" onclick="kirimPesan()">✔️</button>
  </footer>

  <!-- ✅ SCRIPT TAMBAHAN TAHAP 4 dan 5 -->
  <script>
    async function getJadwalSemuaLigaHariIni() {
      const apiKey = "ce13b7fee5bfbaa4476de793b906f0d2";
      const tanggalHariIni = new Date().toISOString().split("T")[0];
      try {
        const res = await fetch(`https://api-football-v1.p.rapidapi.com/v3/fixtures?date=${tanggalHariIni}&season=2024`, {
          headers: {
            'X-RapidAPI-Key': apiKey,
            'X-RapidAPI-Host': 'api-football-v1.p.rapidapi.com'
          }
        });
        const data = await res.json();
        const match = data.response;

        if (!match || match.length === 0) return "Tidak ada pertandingan bola hari ini bro.";

        const jadwal = match.map(m => {
          const home = m.teams.home.name;
          const away = m.teams.away.name;
          const jam = new Date(m.fixture.date).toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });
          return `- ${home} vs ${away} (${jam} WIB)`;
        }).join("\n");

        return `📅 Jadwal pertandingan bola hari ini:\n${jadwal}`;
      } catch (err) {
        return "Ups! Gagal ambil jadwal hari ini. Coba lagi nanti bro.";
      }
    }
  </script>

  <!-- ✅ PANGGIL DI KIRIM PESAN -->
  <script>
    // tambahkan ke dalam logika kirimPesan()
    // setelah else if teks.includes("liga") {
    else if (["pertandingan bola malam ini", "pertandingan bola hari ini", "bola malam ini"].some(k => teks.includes(k))) {
      getJadwalSemuaLigaHariIni().then(res => tampilkanBalasan(res));
      input.value = '';
      return;
    }
  </script>
</body>
</html>
